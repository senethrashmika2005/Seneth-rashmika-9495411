#include <iostream>
#include <iomanip>

using namespace std;

// Function to calibrate the value by multiplying with a factor
template<typename S>
S calibrateValue(const S &x, char factor)
{
    return x * (factor - '0');
}

// Function to adjust the sensor reading by adding an offset
void adjustReading(double *value, double offset = 1.25)
{
    *value += offset;
}

// Function to clamp the value between 0 and 100
void clampReading(double &r)
{
    if (r < 0)  r = 0;
    else if (r > 100) r = 100;
}

// Function to return the difference between an integer and a double
double computeDifference(int a, double b)
{
    return a - b;
}

int main()
{
    int intSensor;
    double doubleSensor;

    cout << fixed << setprecision(4);

    // Get integer and double sensor readings
    cout << "Enter integer sensor reading: ";
    cin >> intSensor;

    cout << "Enter double sensor reading: ";
    cin >> doubleSensor;

    // Calibrate the values by multiplying them by '2'
    int calibratedInt = calibrateValue(intSensor, '2');
    double calibratedDouble = calibrateValue(doubleSensor, '2');

    // Display calibrated values
    cout << "\nCalibrated values:\n";
    cout << setw(10) << calibratedInt << endl;
    cout << setw(10) << calibratedDouble << endl;

    // Convert the integer sensor reading to double
    double convertedIntAsDouble = static_cast<double>(calibratedInt);

    // Adjust the readings with default offset and custom offset
    adjustReading(&convertedIntAsDouble);
    adjustReading(&calibratedDouble, 3.4);

    // Display adjusted values
    cout << "\nAfter adjustment:\n";
    cout << setw(10) << convertedIntAsDouble << endl;
    cout << setw(10) << calibratedDouble << endl;

    // Clamp the readings
    clampReading(convertedIntAsDouble);
    clampReading(calibratedDouble);

    // Display clamped values
    cout << "\nAfter clamping:\n";
    cout << setw(10) << convertedIntAsDouble << endl;
    cout << setw(10) << calibratedDouble << endl;

    // Convert the double value of the integer sensor back to integer
    int finalInt = static_cast<int>(convertedIntAsDouble);

    cout << "\nConverted back to Int:\n";
    cout << setw(10) << noshowpoint << setprecision(0) << finalInt << endl;
    cout << fixed << setprecision(4);

    // Compute the difference between the integer and double values
    double difference = computeDifference(finalInt, calibratedDouble);

    // Display the difference
    cout << "\nDifference (Int - Double):\n";
    cout << setw(10) << difference << endl;

    return 0;
}
